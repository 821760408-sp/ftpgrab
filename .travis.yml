language: bash
sudo: required
dist: trusty

before_install:
  - sudo -i
  - apt-get update
  - apt-get install -y -q gawk curl wget mailutils tree

install:
  - mkdir -p /opt/ftpgrab/conf /var/log/ftpgrab
  - cp ftpgrab.sh /etc/init.d/ftpgrab
  - chmod +x /etc/init.d/ftpgrab
  - cp ftpgrab.conf /opt/ftpgrab/

before_script:
  - chmod +x tests/*.sh

script:
  - cd tests/
  - ./test1_wget_md5_text.sh
  - ./test1_wget_sha1_text.sh

after_script:
  - tree -d /opt/ftpgrab/
  - tree -d /var/log/ftpgrab/

notifications:
  slack:
    secure: WuzYm7aWEyuYdLGA9PMv7RdYQxOhaJMsWbVv3aneTX+y4Pk2MdgWNoUqu87NZsbjvpmH7UpH8JxJeo4QZ2bEVgrFvuozxY8Z3D6C0ZstvWfZyHQWVVwcy0zuLxJ1lFU3nZHftLl6S5zQQ4drJd/JVaI3f7qBVUMOEUDkYh4C678=
